{% extends 'Base/Views/base.html.twig' %}

{% block title %}
    {{ 'dashboard.title'|trans }}
{% endblock %}

{% block description %}
    {{ 'dashboard.description'|trans }}
{% endblock %}

{% block content %}
    <div class="modal fade" id="newWidgetModal">
        <div class="modal-dialog">
            <div class="modal-content" id="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">{{ 'dashboard.modal.add'|trans }}</h4>
                </div>
                <div id="modal-content-ajax"></div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div><!-- /.modal -->
    
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-10 col-sm-offset-1">
                <div class="row" id="dashboard-menu-bar">
                    <div class="btn-group">
                    <button type="button" class="btn btn-default" onclick="yaff.dashboard.createWidgetGraph()" data-toggle="modal" data-target="#newWidgetModal"><span class="glyphicon glyphicon-plus"></span> {{ 'dashboard.modal.add'|trans }}</button>
                    </div>
                    <hr>
                </div>
                {% for i in 1..config.rows %}
                <div class="row">
                    {% for j in 1..config.columns %}
                        <div class="col-sm-{{ 12 / config.columns }}">
                            <div class="panel panel-primary">                                
                                <div class="panel-heading">Test</div>
                                <div class="panel-body">Body</div>
                            </div>
                        </div>                
                    {% endfor %} 
                </div>
                {% endfor %}  
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
    yaff.dashboard = {
        createWidgetGraph: function() {
            var idModal = '#modal-content-ajax';
            yaff.util.setContentModalLoading(idModal);
            $(idModal).load('{{ path('yaff.dashboard.create.widget.graph') }}', function() {
                $('#device').change(yaff.dashboard.createOptionsReadings);
                $('#reading').change(yaff.dashboard.getCurrentReadingValue);
                yaff.dashboard.createOptionsReadings();
            });
        }
    }
    </script>
{% endblock %}